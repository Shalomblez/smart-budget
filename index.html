<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Budget - Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f4f6f9; color: #333; }
    h1 { color: #2c3e50; }
    nav a { margin-right: 15px; text-decoration: none; color: #2980b9; font-weight: bold; }
    nav a:hover { text-decoration: underline; }
    section { background: #fff; padding: 15px; margin: 20px 0; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    canvas { max-width: 500px; margin: 20px 0; }
    label { display: block; margin: 10px 0 5px; font-weight: bold; }
    input, select, button { padding: 8px; margin: 5px 0; width: 100%; max-width: 300px; }
    button { background: #2980b9; color: #fff; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background: #1c5980; }
  </style>
</head>
<body>
  <h1>Smart Budget - Dashboard</h1>
  <nav>
    <a href="index.html">Dashboard</a> |
    <a href="expenses.html">Expenses</a> |
    <a href="howto.html">How to Use</a>
  </nav>

  <!-- Monthly Setup Section -->
  <section>
    <h2>Monthly Setup</h2>
    <form id="setupForm">
      <label for="month">Month:</label>
      <select id="month"></select>

      <label for="year">Year:</label>
      <input type="number" id="year" value="2025" />

      <label for="salary">Monthly Salary (₹):</label>
      <input type="number" id="salary" placeholder="Enter salary" />

      <label for="savingGoal">Saving Goal (₹):</label>
      <input type="number" id="savingGoal" placeholder="Enter saving goal" />

      <button type="button" onclick="saveSetup()">Save Setup</button>
    </form>
  </section>

  <!-- Month Filter for Charts -->
  <section>
    <h2>Filter Charts by Month</h2>
    <label for="filterMonth">Select Month:</label>
    <select id="filterMonth">
      <option value="all">All</option>
      <option value="1">January</option>
      <option value="2">February</option>
      <option value="3">March</option>
      <option value="4">April</option>
      <option value="5">May</option>
      <option value="6">June</option>
      <option value="7">July</option>
      <option value="8">August</option>
      <option value="9">September</option>
      <option value="10">October</option>
      <option value="11">November</option>
      <option value="12">December</option>
    </select>
  </section>

  <!-- Overview Section -->
  <section>
    <h2>This Month Overview</h2>
    <p><strong>Salary:</strong> ₹<span id="totalIncome">0</span></p>
    <p><strong>Total Expenses:</strong> ₹<span id="totalExpense">0</span></p>
    <p><strong>Saving Goal:</strong> ₹<span id="savingGoalDisplay">0</span></p>
    <p><strong>Spendable Amount:</strong> ₹<span id="remainingToSpend">0</span></p>
    <p><strong>Remaining Balance:</strong> ₹<span id="remainingBalance">0</span></p>
  </section>

  <!-- Charts Section -->
  <section>
    <h2>Charts</h2>
    <canvas id="categoryChart"></canvas>
    <canvas id="monthlyChart"></canvas>
  </section>

  <script src="script.js"></script>
  <script>
    SmartBudget.initDashboard();

    // Populate month dropdown dynamically
    const monthNames = ["January","February","March","April","May","June","July","August","September","October","November","December"];
    const monthSelect = document.getElementById("month");
    monthNames.forEach((m,i)=> {
      const opt = document.createElement("option");
      opt.value = m;
      opt.text = m;
      monthSelect.appendChild(opt);
    });

    function saveSetup() {
      const salary = parseFloat(document.getElementById("salary").value) || 0;
      const savingGoal = parseFloat(document.getElementById("savingGoal").value) || 0;

      const spendable = salary - savingGoal;
      const expenses = SmartBudget.getTotalExpenses();
      const remaining = spendable - expenses;

      document.getElementById("totalIncome").textContent = salary.toFixed(2);
      document.getElementById("savingGoalDisplay").textContent = savingGoal.toFixed(2);
      document.getElementById("totalExpense").textContent = expenses.toFixed(2);
      document.getElementById("remainingToSpend").textContent = spendable.toFixed(2);
      document.getElementById("remainingBalance").textContent = remaining.toFixed(2);

      // Save locally
      localStorage.setItem("salary", salary);
      localStorage.setItem("savingGoal", savingGoal);
    }
  </script>
</body>
</html>
